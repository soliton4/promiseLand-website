//>>built
(function(d){"object"==typeof exports&&"object"==typeof module?d(require("../../lib/codemirror"),require("../htmlmixed/htmlmixed"),require("../smarty/smarty")):"function"==typeof define&&define.amd?define("codemirror4/mode/smartymixed/smartymixed",["../../lib/codemirror","../htmlmixed/htmlmixed","../smarty/smarty"],d):d(CodeMirror)})(function(d){d.defineMode("smartymixed",function(l){var n,p,q,r,s,h,c,m,k,e=d.getMode(l,"htmlmixed"),f=d.getMode(l,"smarty");h="}";c="{";l.hasOwnProperty("leftDelimiter")&&
(c=l.leftDelimiter);l.hasOwnProperty("rightDelimiter")&&(h=l.rightDelimiter);n=RegExp("^"+c+"\\*");p=RegExp(c+"literal"+h);q=RegExp(c+"/literal"+h);r=RegExp(".*"+c);s=RegExp("[^\x3c\x3e]*"+c);m={chain:function(b,a,g){a.tokenize=g;return g(b,a)},cleanChain:function(b,a,g){a.tokenize=null;a.localState=null;a.localMode=null;return"string"==typeof g?g?g:null:g(b,a)},maybeBackup:function(b,a,g){var c=b.current(),d=c.search(a);-1<d?b.backUp(c.length-d):c.match(/<\/?$/)&&(b.backUp(c.length),b.match(a,!1)||
b.match(c[0]));return g}};k={html:function(b,a){return!a.inLiteral&&b.match(s,!1)&&null===a.htmlMixedState.htmlState.tagName||!a.inLiteral&&b.match(c,!1)?(a.tokenize=k.smarty,a.localMode=f,a.localState=f.startState(e.indent(a.htmlMixedState,"")),m.maybeBackup(b,c,f.token(b,a.localState))):e.token(b,a.htmlMixedState)},smarty:function(b,a){if(b.match(c,!1)){if(b.match(n,!1))return m.chain(b,a,k.inBlock("comment","*"+h))}else if(b.match(h,!1))return b.eat(h),a.tokenize=k.html,a.localMode=e,a.localState=
a.htmlMixedState,"tag";return m.maybeBackup(b,h,f.token(b,a.localState))},inBlock:function(b,a){return function(c,d){for(;!c.eol();){if(c.match(a)){m.cleanChain(c,d,"");break}c.next()}return b}}};return{startState:function(){var b=e.startState();return{token:k.html,localMode:null,localState:null,htmlMixedState:b,tokenize:null,inLiteral:!1}},copyState:function(b){var a=null,c=b.tokenize||b.token;b.localState&&(a=d.copyState(c!=k.html?f:e,b.localState));return{token:b.token,tokenize:b.tokenize,localMode:b.localMode,
localState:a,htmlMixedState:d.copyState(e,b.htmlMixedState),inLiteral:b.inLiteral}},token:function(b,a){if(b.match(c,!1)){if(!a.inLiteral&&b.match(p,!0))return a.inLiteral=!0,"keyword";if(a.inLiteral&&b.match(q,!0))return a.inLiteral=!1,"keyword"}a.inLiteral&&a.localState!=a.htmlMixedState&&(a.tokenize=k.html,a.localMode=e,a.localState=a.htmlMixedState);return(a.tokenize||a.token)(b,a)},indent:function(b,a){return b.localMode==f||b.inLiteral&&!b.localMode||r.test(a)?d.Pass:e.indent(b.htmlMixedState,
a)},innerMode:function(b){return{state:b.localState||b.htmlMixedState,mode:b.localMode||e}}}},"htmlmixed","smarty");d.defineMIME("text/x-smarty","smartymixed")});
//# sourceMappingURL=smartymixed.js.map