//>>built
(function(c){"object"==typeof exports&&"object"==typeof module?c(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror4/addon/edit/closebrackets",["../../lib/codemirror"],c):c(CodeMirror)})(function(c){function p(c,a){var b=c.getRange(l(a.line,a.ch-1),l(a.line,a.ch+1));return 2==b.length?b:null}function q(h){for(var a={name:"autoCloseBrackets",Backspace:function(a){if(a.getOption("disableInput"))return c.Pass;for(var g=a.listSelections(),m=0;m<g.length;m++){if(!g[m].empty())return c.Pass;
var b=p(a,g[m].head);if(!b||0!=h.indexOf(b)%2)return c.Pass}for(m=g.length-1;0<=m;m--)b=g[m].head,a.replaceRange("",l(b.line,b.ch-1),l(b.line,b.ch+1))}},b="",e=0;e<h.length;e+=2)(function(d,g){d!=g&&(b+=g);a["'"+d+"'"]=function(a){if(a.getOption("disableInput"))return c.Pass;for(var e=a.listSelections(),n,k,h=0;h<e.length;h++){var p=e[h],f=p.head;if("'"==d&&"comment"==a.getTokenTypeAt(f))return c.Pass;k=a.getRange(f,l(f.line,f.ch+1));if(p.empty())if(d==g&&k==g)k=a.getRange(f,l(f.line,f.ch+3))==d+
d+d?"skipThree":"skip";else if(d==g&&1<f.ch&&a.getRange(l(f.line,f.ch-2),f)==d+d&&(2>=f.ch||a.getRange(l(f.line,f.ch-3),l(f.line,f.ch-2))!=d))k="addFour";else if(!(d==g&&c.isWordChar(k))&&(a.getLine(f.line).length==f.ch||0<=b.indexOf(k)||r.test(k)))k="both";else return c.Pass;else k="surround";if(n){if(n!=k)return c.Pass}else n=k}a.operation(function(){if("skip"==n)a.execCommand("goCharRight");else if("skipThree"==n)for(var b=0;3>b;b++)a.execCommand("goCharRight");else if("surround"==n){for(var c=
a.getSelections(),b=0;b<c.length;b++)c[b]=d+c[b]+g;a.replaceSelections(c,"around")}else"both"==n?(a.replaceSelection(d+g,null),a.execCommand("goCharLeft")):"addFour"==n&&(a.replaceSelection(d+d+d+d,"before"),a.execCommand("goCharRight"))})};d!=g&&(a["'"+g+"'"]=function(a){for(var b=a.listSelections(),d=0;d<b.length;d++){var e=b[d];if(!e.empty()||a.getRange(e.head,l(e.head.line,e.head.ch+1))!=g)return c.Pass}a.execCommand("goCharRight")})})(h.charAt(e),h.charAt(e+1));return a}function s(h){return function(a){if(a.getOption("disableInput"))return c.Pass;
for(var b=a.listSelections(),e=0;e<b.length;e++){if(!b[e].empty())return c.Pass;var d=p(a,b[e].head);if(!d||0!=h.indexOf(d)%2)return c.Pass}a.operation(function(){a.replaceSelection("\n\n",null);a.execCommand("goCharLeft");b=a.listSelections();for(var c=0;c<b.length;c++){var d=b[c].head.line;a.indentLine(d,null,!0);a.indentLine(d+1,null,!0)}})}}var r=/\s/,l=c.Pos;c.defineOption("autoCloseBrackets",!1,function(h,a,b){b!=c.Init&&b&&h.removeKeyMap("autoCloseBrackets");if(a){var e="()[]{}''\"\"";b="[]{}";
"string"==typeof a?e=a:"object"==typeof a&&(null!=a.pairs&&(e=a.pairs),null!=a.explode&&(b=a.explode));a=q(e);b&&(a.Enter=s(b));h.addKeyMap(a)}})});
//# sourceMappingURL=closebrackets.js.map