//>>built
(function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror4/addon/search/match-highlighter",["../../lib/codemirror"],e):e(CodeMirror)})(function(e){function l(a){"object"==typeof a&&(this.minChars=a.minChars,this.style=a.style,this.showToken=a.showToken,this.delay=a.delay);null==this.style&&(this.style=m);null==this.minChars&&(this.minChars=n);null==this.delay&&(this.delay=p);this.overlay=this.timeout=
null}function g(a){var b=a.state.matchHighlighter;clearTimeout(b.timeout);b.timeout=setTimeout(function(){h(a)},b.delay)}function h(a){a.operation(function(){var b=a.state.matchHighlighter;b.overlay&&(a.removeOverlay(b.overlay),b.overlay=null);if(!a.somethingSelected()&&b.showToken){for(var d=!0===b.showToken?/[\w$]/:b.showToken,c=a.getCursor(),e=a.getLine(c.line),f=c=c.ch;c&&d.test(e.charAt(c-1));)--c;for(;f<e.length&&d.test(e.charAt(f));)++f;c<f&&a.addOverlay(b.overlay=k(e.slice(c,f),d,b.style))}else a.getCursor("head").line==
a.getCursor("anchor").line&&(d=a.getSelections()[0].replace(/^\s+|\s+$/g,""),d.length>=b.minChars&&a.addOverlay(b.overlay=k(d,!1,b.style)))})}function k(a,b,d){return{token:function(c){if(c.match(a)&&(!b||(!c.start||!b.test(c.string.charAt(c.start-1)))&&(c.pos==c.string.length||!b.test(c.string.charAt(c.pos)))))return d;c.next();c.skipTo(a.charAt(0))||c.skipToEnd()}}}var n=2,m="matchhighlight",p=100;e.defineOption("highlightSelectionMatches",!1,function(a,b,d){d&&d!=e.Init&&((d=a.state.matchHighlighter.overlay)&&
a.removeOverlay(d),clearTimeout(a.state.matchHighlighter.timeout),a.state.matchHighlighter=null,a.off("cursorActivity",g));b&&(a.state.matchHighlighter=new l(b),h(a),a.on("cursorActivity",g))})});
//# sourceMappingURL=match-highlighter.js.map