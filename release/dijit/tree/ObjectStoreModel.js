//>>built
define("dijit/tree/ObjectStoreModel","dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/when ../Destroyable".split(" "),function(k,p,l,m,g,f,n){return l("dijit.tree.ObjectStoreModel",n,{store:null,labelAttr:"name",labelType:"text",root:null,query:null,constructor:function(a){g.mixin(this,a);this.childrenCache={}},getRoot:function(a,d){if(this.root)a(this.root);else{var c=this.store.query(this.query);c.then&&this.own(c);f(c,g.hitch(this,function(b){if(1!=b.length)throw Error("dijit.tree.ObjectStoreModel: root query returned "+
b.length+" items, but must return exactly one");this.root=b[0];a(this.root);c.observe&&c.observe(g.hitch(this,function(a){this.onChange(a)}),!0)}),d)}},mayHaveChildren:function(){return!0},getChildren:function(a,d,c){var b=this.store.getIdentity(a);if(this.childrenCache[b])f(this.childrenCache[b],d,c);else{var e=this.childrenCache[b]=this.store.getChildren(a);e.then&&this.own(e);e.observe&&this.own(e.observe(g.hitch(this,function(c,b,d){this.onChange(c);b!=d&&f(e,g.hitch(this,"onChildrenChange",a))}),
!0));f(e,d,c)}},isItem:function(){return!0},getIdentity:function(a){return this.store.getIdentity(a)},getLabel:function(a){return a[this.labelAttr]},newItem:function(a,d,c,b){return this.store.put(a,{parent:d,before:b})},pasteItem:function(a,d,c,b,e,f){var h=new m;if(d===c&&!b&&!f)return h.resolve(!0),h;d&&!b?this.getChildren(d,g.hitch(this,function(b){b=[].concat(b);var e=k.indexOf(b,a);b.splice(e,1);this.onChildrenChange(d,b);h.resolve(this.store.put(a,{overwrite:!0,parent:c,before:f}))})):h.resolve(this.store.put(a,
{overwrite:!0,parent:c,before:f}));return h},onChange:function(){},onChildrenChange:function(){},onDelete:function(){}})});
//# sourceMappingURL=ObjectStoreModel.js.map